<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Layout Argenzio</title>
	<link rel="stylesheet" href="/css/stylemenu.css" />
	<link rel="stylesheet" href="/css/stylelog.css">
	<script defer src="/js/menu-active.js"></script>
</head>
<body>
	<aside class="sidebar">
		<div class="profile">
			<div class="avatar"></div>
			<div class="user-info">
				<span class="user-name"><%= usuario %></span>
				<span class="user-role"><%= roles %></span>
			</div>
		</div>

		<div class="menu-wrapper">
			<nav class="menu">
			<% if (!roles.includes('atendente')) { %>
				<a href="/auditoria" class="menu-btn clock" aria-label="Relógio" title="Auditoria"></a>
			<% } %>
			<a href="/relatorios" class="menu-btn stats" aria-label="Estatísticas"></a>
			<a href="/descricoes/produtos" class="menu-btn produto" aria-label="Descrição dos Produtos" title="Descrição dos Produtos"></a>
			</nav>
		</div>
	</aside>

	<main class="main-content">
		<div class="logo"></div>
		
		<div class="table-container" id="container-tabela">
			<table class="auditoria-table">
				<caption>Log de Auditoria</caption>
				<thead>
					<tr>
						<th>Nome da Tabela</th>
						<th>Operação</th>
						<th>Registro Antigo</th>
						<th>Registro Novo</th>
						<th>Usuário</th>
						<th>Horário</th>
					</tr>
				</thead>
				<tbody id="tabela-corpo">
				</tbody>
			</table>
		</div>
		
		<div id="mensagem-vazia" style="display:none; text-align:center; padding:20px;">
			Nenhum registro encontrado.
		</div>
	</main>

	<script>
		// <%- %> (sem escape) é usado para imprimir o JSON puro.
		// O "|| []" previne erro se a variável vier nula do back.
		const DADOS_BRUTOS = <%- JSON.stringify(registro_auditoria || []) %>;
	</script>

	<script src="/js/auditoriaScript.js"></script>
</body>
</html>
